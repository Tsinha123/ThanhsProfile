<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Thanh's Profile — Games + Calendar</title>
  <style>
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: Arial, Helvetica, sans-serif;
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      grid-template-rows: auto auto auto 1fr;
      height: 100vh;
      overflow: hidden;
      background: #f5f5f5;
    }

    header {
      grid-column: 1 / 4;
      display: flex;
      align-items: center;
      padding: 10px 20px;
      font-size: 24px;
      font-weight: 700;
      background: #222;
      color: #fff;
    }

    .ribbon {
      grid-column: 1 / 4;
      height: 8px;
      background: linear-gradient(90deg,#f06,#f79);
      position: relative;
    }

    .visitor-counter {
      position: absolute;
      right: 15px;
      top: -28px;
      background: #222;
      color: white;
      font-size: 14px;
      padding: 4px 8px;
      border-radius: 6px;
      box-shadow: 0 0 5px rgba(0,0,0,0.3);
    }

    .datetime {
      grid-column: 1 / 4;
      text-align: center;
      padding: 12px;
      font-size: 18px;
      font-weight: 500;
      background: #fff3e6;
      border-bottom: 2px solid #f06;
    }

    .calendar {
      grid-column: 1 / 4;
      background: #fff;
      padding: 18px;
      border-bottom: 2px solid #ccc;
    }

    .calendar-header { display:flex; align-items:center; justify-content:space-between; margin-bottom:10px; }
    .calendar-header button {
      background: #f06; border: none; color: #fff; padding: 6px 10px; font-size:16px; cursor:pointer; border-radius:6px;
    }
    .calendar-header h2 { margin: 0; font-size: 20px; font-weight: 600; color: #333; }

    .calendar-grid {
      display:grid;
      grid-template-columns: repeat(7,1fr);
      gap:6px;
    }

    .calendar-day { text-align:center; padding:10px; border-radius:6px; cursor:pointer; font-size:14px; background:transparent; }
    .calendar-day:hover { background:#f9d3e4; }
    .calendar-day.today { background:#f06; color:#fff; font-weight:700; }
    .calendar-day.selected { background:#333; color:#fff; }

    .day-name { font-weight:700; color:#555; padding:6px 0; text-align:center; }

    main {
      grid-column: 1 / 4;
      overflow-y: auto;
      padding: 20px;
      background: #f5f5dc;
      display:flex;
      flex-direction: column;
      gap: 30px;
      align-items: center;
    }

    section {
      background: #fafafa;
      border-radius: 8px;
      padding: 15px;
      box-shadow: 0 0 10px rgba(0,0,0,0.08);
      width: 640px;
      position: relative;
    }

    .game-title { color:#333; margin-bottom:8px; font-weight:600; text-align:center; font-size:22px; }
    canvas { background:#222; display:block; margin: 0 auto; border-radius:8px; box-shadow: 0 0 10px #f06; }

    .score { text-align:center; font-size:18px; font-weight:700; margin:8px 0; color:#444; }
    .controls { text-align:center; font-size:14px; margin-bottom:8px; color:#555; }

    /* Section overlay (centered) */
    .overlay {
      position:absolute;
      top:0; left:0; width:100%; height:100%;
      background: rgba(0,0,0,0.78);
      color:#fff;
      display:flex;
      align-items:center;
      justify-content:center;
      flex-direction:column;
      gap:10px;
      font-size:20px;
      font-weight:700;
      border-radius:8px;
    }
    .overlay.hidden { display:none; }
    .overlay button {
      padding:8px 16px; background:#f06; border:none; border-radius:6px; color:#fff; cursor:pointer; font-size:16px;
    }

    /* large countdown shown as separate overlay text */
    .big-count {
      position:absolute;
      top:0; left:0; width:100%; height:100%; display:flex;
      align-items:center; justify-content:center; font-size:48px; font-weight:800; color: yellow;
      pointer-events:none;
      border-radius:8px;
    }
    .big-count.hidden { display:none; pointer-events:none; }
  </style>
</head>
<body>
  <header>Thanh's Profile</header>

  <div class="ribbon">
    <div class="visitor-counter" id="visitorCounter">Visitors: 0</div>
  </div>

  <div class="datetime" id="datetime"></div>

  <!-- ===== Calendar ===== -->
  <div class="calendar">
    <div class="calendar-header">
      <button id="prevMonth">&lt;</button>
      <h2 id="calendarMonth"></h2>
      <button id="nextMonth">&gt;</button>
    </div>
    <div class="calendar-grid" id="calendarDays"></div>
  </div>

  <main>
    <!-- ===== Crossy Road ===== -->
    <section id="crossySection">
      <h3 class="game-title">Crossy Road</h3>
      <div class="controls">Controls: ↑ Move Up | ↓ Move Down | ← Move Left | → Move Right</div>
      <div class="score" id="crossyScore">Score: 0</div>
      <canvas id="crossyRoad" width="600" height="450"></canvas>

      <div id="crossyOverlay" class="overlay hidden">
        <div id="crossyMessage">Game Over</div>
        <button id="crossyRestartBtn">Restart</button>
      </div>

      <div id="crossyCountdown" class="big-count hidden"></div>
    </section>

    <!-- ===== Ping Pong ===== -->
    <section id="pongSection">
      <h3 class="game-title">Ping Pong</h3>
      <div class="controls">Controls: Move mouse up/down to control paddle (Play to 10 points)</div>
      <div class="score" id="pongScore">Player: 0 | Opponent: 0</div>
      <canvas id="pingPong" width="600" height="450"></canvas>

      <div id="pongOverlay" class="overlay hidden">
        <div id="pongWinner">Player Wins!</div>
        <div>Game Over</div>
        <button id="pongRestartBtn">Restart</button>
      </div>

      <div id="pongCountdown" class="big-count hidden"></div>
    </section>
  </main>

  <script>
  /* ===== Visitor Counter ===== */
  function updateVisitorCounter() {
    let count = parseInt(localStorage.getItem("visitorCount") || "0", 10);
    count++;
    localStorage.setItem("visitorCount", String(count));
    document.getElementById("visitorCounter").textContent = "Visitors: " + count;
  }
  updateVisitorCounter();

  /* ===== Date & Time ===== */
  function updateDateTime() {
    const now = new Date();
    const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
    const dateStr = now.toLocaleDateString(undefined, options);
    const timeStr = now.toLocaleTimeString(undefined, { hour: '2-digit', minute: '2-digit', second: '2-digit' });
    document.getElementById('datetime').textContent = `${dateStr} — ${timeStr}`;
  }
  setInterval(updateDateTime, 1000);
  updateDateTime();

  /* ===== Calendar ===== */
  const calendarDays = document.getElementById("calendarDays");
  const calendarMonth = document.getElementById("calendarMonth");
  const prevMonthBtn = document.getElementById("prevMonth");
  const nextMonthBtn = document.getElementById("nextMonth");
  let currentDate = new Date();
  let selectedDay = null;

  function renderCalendar(date) {
    calendarDays.innerHTML = "";
    const year = date.getFullYear();
    const month = date.getMonth();
    const firstDayIndex = new Date(year, month, 1).getDay(); // 0..6
    const daysInMonth = new Date(year, month + 1, 0).getDate();
    const monthName = date.toLocaleString("default", { month: "long" });
    calendarMonth.textContent = `${monthName} ${year}`;

    // day names header
    const dayNames = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];
    dayNames.forEach(day => {
      const d = document.createElement("div");
      d.className = "day-name";
      d.textContent = day;
      calendarDays.appendChild(d);
    });

    // blank placeholders for first day offset
    for (let i = 0; i < firstDayIndex; i++) {
      const blank = document.createElement("div");
      calendarDays.appendChild(blank);
    }

    for (let d = 1; d <= daysInMonth; d++) {
      const slot = document.createElement("div");
      slot.className = "calendar-day";
      slot.textContent = String(d);

      const today = new Date();
      if (d === today.getDate() && month === today.getMonth() && year === today.getFullYear()) {
        slot.classList.add("today");
      }
      if (selectedDay && selectedDay.day === d && selectedDay.month === month && selectedDay.year === year) {
        slot.classList.add("selected");
      }

      slot.addEventListener("click", () => {
        selectedDay = { day: d, month, year };
        // re-render to update selection
        renderCalendar(currentDate);
      });

      calendarDays.appendChild(slot);
    }
  }

  prevMonthBtn.addEventListener("click", () => {
    currentDate.setMonth(currentDate.getMonth() - 1);
    renderCalendar(currentDate);
  });
  nextMonthBtn.addEventListener("click", () => {
    currentDate.setMonth(currentDate.getMonth() + 1);
    renderCalendar(currentDate);
  });

  renderCalendar(currentDate);

  /* ===== Crossy Road ===== */
  (function() {
    const canvas = document.getElementById("crossyRoad");
    const ctx = canvas.getContext("2d");
    const scoreEl = document.getElementById("crossyScore");
    const overlay = document.getElementById("crossyOverlay");
    const overlayMsg = document.getElementById("crossyMessage");
    const restartBtn = document.getElementById("crossyRestartBtn");
    const countdownEl = document.getElementById("crossyCountdown");

    const CANVAS_W = canvas.width;
    const CANVAS_H = canvas.height;

    let player, cars, score, gameOver, animId;

    function makePlayer() {
      return { x: 280, y: 420, size: 20, color: "lime" }; // spawn y=420
    }

    function spawnCars() {
      cars = [];
      const colors = ["red","orange","yellow","green","blue","indigo","violet"];
      // lanes - create 8 lanes spaced vertically
      const lanes = 8;
      for (let i=0;i<lanes;i++) {
        const laneY = 30 + i * 50;
        // random number of cars per lane
        const count = 2 + Math.floor(Math.random()*3);
        for (let j=0;j<count;j++) {
          const width = 50 + Math.floor(Math.random()*40);
          const height = 18;
          const x = Math.random() * CANVAS_W;
          const speed = 2 + Math.random()*3 + (i%2===0 ? 0 : 1); // alternating speeds
          const color = colors[Math.floor(Math.random()*colors.length)];
          cars.push({ x, y: laneY, width, height, speed, color });
        }
      }
    }

    function initCrossy() {
      cancelAnimationFrame(animId);
      player = makePlayer();
      spawnCars();
      score = 0;
      gameOver = false;
      overlay.classList.add("hidden");
      countdownEl.classList.add("hidden");
      updateScore();
      animId = requestAnimationFrame(loop);
    }

    function updateScore() { scoreEl.textContent = "Score: " + score; }

    function clampPlayer() {
      player.x = Math.max(0, Math.min(player.x, CANVAS_W - player.size));
      player.y = Math.max(0, Math.min(player.y, CANVAS_H - player.size));
    }

    function loop() {
      if (gameOver) return;
      ctx.clearRect(0,0,CANVAS_W,CANVAS_H);

      // draw player
      ctx.fillStyle = player.color;
      ctx.fillRect(player.x, player.y, player.size, player.size);

      // update & draw cars
      for (let car of cars) {
        car.x += car.speed;
        if (car.x > CANVAS_W + car.width) car.x = -car.width;
        if (car.x < -car.width) car.x = CANVAS_W + car.width;

        ctx.fillStyle = car.color;
        ctx.fillRect(car.x, car.y, car.width, car.height);

        // collision
        if (player.x < car.x + car.width &&
            player.x + player.size > car.x &&
            player.y < car.y + car.height &&
            player.y + player.size > car.y) {
          // collision detected
          gameOver = true;
          overlayMsg.textContent = "Game Over!";
          overlay.classList.remove("hidden");
          return;
        }
      }

      // success - reached top
      if (!gameOver && player.y < 10) {
        score++;
        // reset player to spawn at y=420
        player.y = 420;
        // slightly speed up cars
        for (let c of cars) c.speed *= 1.12;
        // check overall win condition (optional)
        if (score >= 10) {
          gameOver = true;
          overlayMsg.textContent = "Player Wins!";
          overlay.classList.remove("hidden");
          return;
        }
      }

      updateScore();
      animId = requestAnimationFrame(loop);
    }

    // keyboard controls
    window.addEventListener("keydown", e => {
      if (gameOver) return;
      const step = 20;
      if (e.key === "ArrowUp") player.y -= step;
      if (e.key === "ArrowDown") player.y += step;
      if (e.key === "ArrowLeft") player.x -= step;
      if (e.key === "ArrowRight") player.x += step;
      clampPlayer();
    });

    // Restart handlers with countdown
    function startCountdownAndInit() {
      overlay.classList.add("hidden");
      countdownEl.classList.remove("hidden");
      let count = 3;
      countdownEl.textContent = String(count);
      const iv = setInterval(() => {
        count--;
        if (count > 0) {
          countdownEl.textContent = String(count);
        } else {
          clearInterval(iv);
          countdownEl.classList.add("hidden");
          initCrossy();
        }
      }, 1000);
    }

    restartBtn.addEventListener("click", startCountdownAndInit);
    // start initially with a countdown
    startCountdownAndInit();
  })();

  /* ===== Ping Pong (Harder) ===== */
  (function() {
    const canvas = document.getElementById("pingPong");
    const ctx = canvas.getContext("2d");
    const scoreEl = document.getElementById("pongScore");
    const overlay = document.getElementById("pongOverlay");
    const winnerEl = document.getElementById("pongWinner");
    const restartBtn = document.getElementById("pongRestartBtn");
    const countdownEl = document.getElementById("pongCountdown");

    const CANVAS_W = canvas.width;
    const CANVAS_H = canvas.height;
    const WIN_SCORE = 10;

    let player, ai, ball, animId, gameOver;

    function initObjects() {
      player = { x: 10, y: CANVAS_H/2 - 40, width: 10, height: 80, color: "lime", score: 0 };
      ai     = { x: CANVAS_W - 20, y: CANVAS_H/2 - 40, width: 10, height: 80, color: "red", score: 0 };
      ball   = { x: CANVAS_W/2, y: CANVAS_H/2, size: 10, speedX: 5 * (Math.random() > 0.5 ? 1 : -1), speedY: (Math.random()-0.5)*4, color:"white" };
      gameOver = false;
      overlay.classList.add("hidden");
      countdownEl.classList.add("hidden");
      updateScore();
    }

    function updateScore() {
      scoreEl.textContent = `Player: ${player.score} | Opponent: ${ai.score}`;
    }

    function resetBall() {
      ball.x = CANVAS_W / 2;
      ball.y = CANVAS_H / 2;
      // randomize starting direction
      ball.speedX = (Math.random() > 0.5 ? 1 : -1) * (4 + Math.random()*2);
      ball.speedY = (Math.random() - 0.5) * 5;
    }

    function clampAi() {
      // ensure AI doesn't go out of bounds
      ai.y = Math.max(0, Math.min(ai.y, CANVAS_H - ai.height));
    }

    function clampPlayer() {
      player.y = Math.max(0, Math.min(player.y, CANVAS_H - player.height));
    }

    function loop() {
      if (gameOver) return;
      ctx.clearRect(0,0,CANVAS_W,CANVAS_H);

      // draw paddles
      ctx.fillStyle = player.color;
      ctx.fillRect(player.x, player.y, player.width, player.height);

      ctx.fillStyle = ai.color;
      ctx.fillRect(ai.x, ai.y, ai.width, ai.height);

      // draw ball
      ctx.fillStyle = ball.color;
      ctx.fillRect(ball.x, ball.y, ball.size, ball.size);

      // move ball
      ball.x += ball.speedX;
      ball.y += ball.speedY;

      // bounce top/bottom
      if (ball.y <= 0 || ball.y + ball.size >= CANVAS_H) {
        ball.speedY *= -1;
      }

      // player collision
      if (ball.x <= player.x + player.width &&
          ball.y + ball.size >= player.y &&
          ball.y <= player.y + player.height) {
        ball.speedX = Math.abs(ball.speedX) * 1.08; // bounce right and speed slightly
        // add a bit of vertical variance
        ball.speedY += (Math.random() - 0.5) * 2;
        ball.x = player.x + player.width; // prevent sticking
      }

      // AI collision
      if (ball.x + ball.size >= ai.x &&
          ball.y + ball.size >= ai.y &&
          ball.y <= ai.y + ai.height) {
        ball.speedX = -Math.abs(ball.speedX) * 1.08; // bounce left & speed slightly
        ball.speedY += (Math.random() - 0.5) * 2;
        ball.x = ai.x - ball.size;
      }

      // scoring
      if (ball.x < 0) {
        ai.score++;
        resetBall();
      } else if (ball.x > CANVAS_W) {
        player.score++;
        resetBall();
      }

      // simple AI — faster to make it harder
      const aiCenter = ai.y + ai.height / 2;
      if (aiCenter < ball.y) ai.y += 5.5;
      else ai.y -= 5.5;
      clampAi();
      clampPlayer();

      updateScore();

      // check end condition
      if (player.score >= WIN_SCORE || ai.score >= WIN_SCORE) {
        gameOver = true;
        winnerEl.textContent = player.score >= WIN_SCORE ? "Player Wins!" : "Opponent Wins!";
        overlay.classList.remove("hidden");
        return;
      }

      animId = requestAnimationFrame(loop);
    }

    // mouse movement for paddle control
    canvas.addEventListener("mousemove", e => {
      const rect = canvas.getBoundingClientRect();
      player.y = e.clientY - rect.top - player.height / 2;
      clampPlayer();
    });

    // restart with countdown
    function startPongCountdown() {
      overlay.classList.add("hidden");
      countdownEl.classList.remove("hidden");
      let count = 3;
      countdownEl.textContent = String(count);
      const iv = setInterval(() => {
        count--;
        if (count > 0) countdownEl.textContent = String(count);
        else {
          clearInterval(iv);
          countdownEl.classList.add("hidden");
          initObjects();
          animId = requestAnimationFrame(loop);
        }
      }, 1000);
    }

    restartBtn.addEventListener("click", startPongCountdown);

    // initialize first time with countdown
    (function initialStart() {
      initObjects();
      // show a countdown on first open
      countdownEl.classList.remove("hidden");
      let c = 3;
      countdownEl.textContent = String(c);
      const tret = setInterval(() => {
        c--;
        if (c > 0) countdownEl.textContent = String(c);
        else {
          clearInterval(tret);
          countdownEl.classList.add("hidden");
          animId = requestAnimationFrame(loop);
        }
      }, 1000);
    })();

  })();
  </script>
</body>
</html>
