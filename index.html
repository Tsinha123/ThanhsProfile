<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Thanh's Profile</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      grid-template-rows: auto auto auto 1fr;
      height: 100vh;
      overflow: hidden;
    }
    header {
      grid-column: 1 / 4;
      display: flex;
      align-items: center;
      padding: 10px 20px;
      font-size: 24px;
      font-weight: bold;
      background: #222;
      color: white;
    }
    .ribbon {
      grid-column: 1 / 4;
      height: 8px;
      background: linear-gradient(to right, #f06, #f79);
      position: relative;
    }
    .visitor-counter {
      position: absolute;
      right: 15px;
      top: -28px;
      background: #222;
      color: white;
      font-size: 14px;
      padding: 4px 8px;
      border-radius: 6px;
      box-shadow: 0 0 5px rgba(0,0,0,0.3);
    }
    .datetime {
      grid-column: 1 / 4;
      text-align: center;
      padding: 15px;
      font-size: 18px;
      font-weight: 500;
      background: #fff3e6;
      border-bottom: 2px solid #f06;
    }
    .calendar {
      grid-column: 1 / 4;
      background: #fff;
      padding: 20px;
      border-bottom: 2px solid #ccc;
    }
    .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    .calendar-header button {
      background: #f06;
      border: none;
      color: white;
      padding: 5px 10px;
      font-size: 16px;
      cursor: pointer;
      border-radius: 4px;
    }
    .calendar-header h2 {
      margin: 0;
      font-size: 20px;
      font-weight: 600;
      color: #333;
    }
    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 5px;
    }
    .calendar-day {
      text-align: center;
      padding: 10px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
    }
    .calendar-day:hover { background: #f9d3e4; }
    .calendar-day.today {
      background: #f06;
      color: white;
      font-weight: bold;
    }
    .calendar-day.selected {
      background: #333;
      color: white;
    }
    .day-name {
      font-weight: bold;
      color: #555;
    }
    main {
      grid-column: 1 / 4;
      overflow-y: auto;
      padding: 20px;
      background: #f5f5dc;
      display: flex;
      flex-direction: column;
      gap: 30px;
      align-items: center;
    }
    section {
      background: #fafafa;
      border-radius: 8px;
      padding: 15px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      width: 640px;
      position: relative;
    }
    .game-title {
      color: #333;
      margin-bottom: 10px;
      font-weight: 600;
      text-align: center;
      font-size: 22px;
    }
    canvas {
      background: #222;
      display: block;
      margin: 0 auto;
      border-radius: 8px;
      box-shadow: 0 0 10px #f06;
    }
    .score {
      text-align: center;
      font-size: 18px;
      font-weight: bold;
      margin: 8px 0;
      color: #444;
    }
    .controls {
      text-align: center;
      font-size: 14px;
      margin-bottom: 8px;
      color: #555;
    }
    .overlay {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.8);
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 10px;
      font-size: 20px;
      font-weight: bold;
      border-radius: 8px;
    }
    .overlay button {
      padding: 8px 16px;
      background: #f06;
      border: none;
      border-radius: 6px;
      color: white;
      font-size: 16px;
      cursor: pointer;
    }
    #countdown, #pongCountdown {
      font-size: 48px;
      font-weight: bold;
      color: yellow;
    }
  </style>
</head>
<body>
  <header>Thanh's Profile</header>
  <div class="ribbon">
    <div class="visitor-counter" id="visitorCounter">Visitors: 0</div>
  </div>
  <div class="datetime" id="datetime"></div>

  <!-- ===== Calendar ===== -->
  <div class="calendar">
    <div class="calendar-header">
      <button id="prevMonth">&lt;</button>
      <h2 id="calendarMonth"></h2>
      <button id="nextMonth">&gt;</button>
    </div>
    <div class="calendar-grid" id="calendarDays"></div>
  </div>

  <main>
    <!-- ===== Crossy Road ===== -->
    <section id="crossySection">
      <h3 class="game-title">Crossy Road</h3>
      <div class="controls">Controls: ↑ Move Up | ↓ Move Down | ← Move Left | → Move Right</div>
      <div class="score" id="crossyScore">Score: 0</div>
      <canvas id="crossyRoad" width="600" height="450"></canvas>
      <div id="crossyOverlay" class="overlay" style="display:none;">
        <div id="crossyMessage"></div>
        <button onclick="startCountdown()">Restart</button>
      </div>
      <div id="countdown" class="overlay" style="display:none;"></div>
    </section>

    <!-- ===== Ping Pong ===== -->
    <section id="pongSection">
      <h3 class="game-title">Ping Pong</h3>
      <div class="controls">Controls: Move mouse up/down to control paddle (Play to 10 points)</div>
      <div class="score" id="pongScore">Player: 0 | Opponent: 0</div>
      <canvas id="pingPong" width="600" height="450"></canvas>
      <div id="pongOverlay" class="overlay" style="display:none;">
        <div id="pongWinner"></div>
        <div>Game Over!</div>
        <button onclick="startPongCountdown()">Restart</button>
      </div>
      <div id="pongCountdown" class="overlay" style="display:none;"></div>
    </section>
  </main>

<script>
/* ===== Visitor Counter ===== */
function updateVisitorCounter() {
  let count = localStorage.getItem("visitorCount");
  if (!count) count = 0;
  count++;
  localStorage.setItem("visitorCount", count);
  document.getElementById("visitorCounter").textContent = "Visitors: " + count;
}
updateVisitorCounter();

/* ===== Date & Time ===== */
function updateDateTime() {
  const now = new Date();
  const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
  const dateStr = now.toLocaleDateString(undefined, options);
  const timeStr = now.toLocaleTimeString(undefined, { hour: '2-digit', minute: '2-digit', second: '2-digit' });
  document.getElementById('datetime').textContent = `${dateStr} — ${timeStr}`;
}
setInterval(updateDateTime, 1000);
updateDateTime();

/* ===== Calendar ===== */
const calendarDays = document.getElementById("calendarDays");
const calendarMonth = document.getElementById("calendarMonth");
const prevMonthBtn = document.getElementById("prevMonth");
const nextMonthBtn = document.getElementById("nextMonth");

let currentDate = new Date();
let selectedDay = null;

function renderCalendar(date) {
  calendarDays.innerHTML = "";
  const year = date.getFullYear();
  const month = date.getMonth();
  const firstDay = new Date(year, month, 1).getDay();
  const daysInMonth = new Date(year, month + 1, 0).getDate();

  const monthName = date.toLocaleString("default", { month: "long" });
  calendarMonth.textContent = `${monthName} ${year}`;

  const dayNames = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];
  dayNames.forEach(day => {
    const div = document.createElement("div");
    div.textContent = day;
    div.classList.add("day-name");
    calendarDays.appendChild(div);
  });

  for (let i = 0; i < firstDay; i++) {
    calendarDays.appendChild(document.createElement("div"));
  }

  for (let day = 1; day <= daysInMonth; day++) {
    const div = document.createElement("div");
    div.textContent = day;
    div.classList.add("calendar-day");

    const today = new Date();
    if (day === today.getDate() && month === today.getMonth() && year === today.getFullYear()) {
      div.classList.add("today");
    }
    if (selectedDay && selectedDay.day === day && selectedDay.month === month && selectedDay.year === year) {
      div.classList.add("selected");
    }

    div.addEventListener("click", () => {
      selectedDay = { day, month, year };
      renderCalendar(currentDate);
    });

    calendarDays.appendChild(div);
  }
}
prevMonthBtn.addEventListener("click", () => {
  currentDate.setMonth(currentDate.getMonth() - 1);
  renderCalendar(currentDate);
});
nextMonthBtn.addEventListener("click", () => {
  currentDate.setMonth(currentDate.getMonth() + 1);
  renderCalendar(currentDate);
});
renderCalendar(currentDate);

/* ===== Crossy Road ===== */
const crossyCanvas = document.getElementById("crossyRoad");
const ctx = crossyCanvas.getContext("2d");
const crossyScoreEl = document.getElementById("crossyScore");
const crossyOverlay = document.getElementById("crossyOverlay");
const countdownEl = document.getElementById("countdown");

let player, cars, score, gameOver, countdown, countdownInterval;

function initCrossy() {
  player = { x: 300, y: 420, size: 30, color: "lime" };
  cars = [];
  score = 0;
  gameOver = false;
  crossyOverlay.style.display = "none";
  countdownEl.style.display = "none";
  spawnCars();
  requestAnimationFrame(crossyLoop);
}

function spawnCars() {
  cars = [];
  for (let i = 0; i < 5; i++) {
    cars.push({ x: Math.random() * 600, y: i * 90, width: 60, height: 30, speed: 2 + Math.random() * 3, color: "red" });
  }
}

function crossyLoop() {
  if (gameOver) return;
  ctx.clearRect(0, 0, 600, 450);

  // Draw player
  ctx.fillStyle = player.color;
  ctx.fillRect(player.x, player.y, player.size, player.size);

  // Draw cars
  cars.forEach(car => {
    car.x += car.speed;
    if (car.x > 600) car.x = -car.width;
    ctx.fillStyle = car.color;
    ctx.fillRect(car.x, car.y, car.width, car.height);

    if (player.x < car.x + car.width &&
        player.x + player.size > car.x &&
        player.y < car.y + car.height &&
        player.y + player.size > car.y) {
      gameOver = true;
      document.getElementById("crossyMessage").textContent = "Game Over! Score: " + score;
      crossyOverlay.style.display = "flex";
    }
  });

  crossyScoreEl.textContent = "Score: " + score;
  requestAnimationFrame(crossyLoop);
}

document.addEventListener("keydown", e => {
  if (gameOver) return;
  if (e.key === "ArrowUp") { player.y -= 30; score++; }
  if (e.key === "ArrowDown") player.y += 30;
  if (e.key === "ArrowLeft") player.x -= 30;
  if (e.key === "ArrowRight") player.x += 30;

  if (player.y < 0) { player.y = 420; score += 5; }
});

function startCountdown() {
  countdown = 3;
  countdownEl.style.display = "flex";
  countdownEl.textContent = countdown;
  countdownInterval = setInterval(() => {
    countdown--;
    if (countdown <= 0) {
      clearInterval(countdownInterval);
      initCrossy();
    } else {
      countdownEl.textContent = countdown;
    }
  }, 1000);
}
startCountdown();

/* ===== Ping Pong (Progressive Difficulty) ===== */
const pongCanvas = document.getElementById("pingPong");
const ctxP = pongCanvas.getContext("2d");
const pongScoreEl = document.getElementById("pongScore");
const pongOverlay = document.getElementById("pongOverlay");
const pongCountdownEl = document.getElementById("pongCountdown");
const pongWinnerEl = document.getElementById("pongWinner");

let playerP, ai, ball, pongGameOver, rallyCount, aiSpeed;

function initPong() {
  playerP = { x: 10, y: 200, width: 10, height: 80, color: "lime", score: 0 };
  ai = { x: 580, y: 200, width: 10, height: 80, color: "red", score: 0 };
  ball = { x: 300, y: 225, size: 10, speedX: 3, speedY: 2, color: "white" };
  aiSpeed = 3;
  rallyCount = 0;
  pongGameOver = false;
  pongOverlay.style.display = "none";
  pongCountdownEl.style.display = "none";
  requestAnimationFrame(pongLoop);
}

function pongLoop() {
  if (pongGameOver) return;

  if (playerP.score >= 10 || ai.score >= 10) {
    pongGameOver = true;
    pongWinnerEl.textContent = playerP.score >= 10 ? "Player Wins!" : "Opponent Wins!";
    pongOverlay.style.display = "flex";
    return;
  }

  ctxP.clearRect(0, 0, 600, 450);

  ctxP.fillStyle = playerP.color;
  ctxP.fillRect(playerP.x, playerP.y, playerP.width, playerP.height);
  ctxP.fillStyle = ai.color;
  ctxP.fillRect(ai.x, ai.y, ai.width, ai.height);

  ctxP.fillStyle = ball.color;
  ctxP.fillRect(ball.x, ball.y, ball.size, ball.size);

  ball.x += ball.speedX;
  ball.y += ball.speedY;

  if (ball.y <= 0 || ball.y + ball.size >= 450) {
    ball.speedY *= -1;
  }

  if (ball.x <= playerP.x + playerP.width &&
      ball.y + ball.size >= playerP.y &&
      ball.y <= playerP.y + playerP.height) {
    ball.speedX *= -1;
    rallyCount++;
    ball.speedX *= 1.1;
    ball.speedY *= 1.1;
  }

  if (ball.x + ball.size >= ai.x &&
      ball.y + ball.size >= ai.y &&
      ball.y <= ai.y + ai.height) {
    ball.speedX *= -1;
    rallyCount++;
    ball.speedX *= 1.1;
    ball.speedY *= 1.1;
  }

  ai.y += (ball.y - (ai.y + ai.height / 2)) * 0.05 * (1 + rallyCount / 20);

  if (ball.x < 0) {
    ai.score++;
    resetBall();
  } else if (ball.x > 600) {
    playerP.score++;
    resetBall();
  }

  pongScoreEl.textContent = `Player: ${playerP.score} | Opponent: ${ai.score}`;
  requestAnimationFrame(pongLoop);
}

function resetBall() {
  ball.x = 300;
  ball.y = 225;
  ball.speedX = 3 * (Math.random() > 0.5 ? 1 : -1);
  ball.speedY = 2 * (Math.random() > 0.5 ? 1 : -1);
  rallyCount = 0;
}

pongCanvas.addEventListener("mousemove", e => {
  const rect = pongCanvas.getBoundingClientRect();
  playerP.y = e.clientY - rect.top - playerP.height / 2;
});

function startPongCountdown() {
  let countdown = 3;
  pongCountdownEl.style.display = "flex";
  pongCountdownEl.textContent = countdown;
  const interval = setInterval(() => {
    countdown--;
    if (countdown <= 0) {
      clearInterval(interval);
      initPong();
    } else {
      pongCountdownEl.textContent = countdown;
    }
  }, 1000);
}
startPongCountdown();
</script>
</body>
</html>
